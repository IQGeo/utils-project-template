global:
  # Local Development only! - setting to true deploys with dev dependencies like Keycloak and PostGIS for local testing, generates these secrets automatically
  isDev: false 
  # domain where the IQGeo solution will be hosted
  domain: iqgeo.localhost
  # Project name used in image repository names (e.g., iqgeo-{project}-appserver). Set by project template tool.
  prefix: myproj 
  # Redis client configuration
  redis:
    # This needs to be set for versions of Platform before 7.4.8, but can be removed when using 7.4.8+
    generateUrls: true


appserver:
  # Default configuration for all appservers - override common settings here
  autoscaling:
    enabled: false
  replicaCount: 1
  oidc:
    enabled: true
    insecure: true
    # # URLs are automatically generated based on global.domain and global.platform_host
    # # Uncomment and set these values only if you need to override the defaults
    # issuer: ""
    # services: ["discovery","authorization","access_token","user_info","end_session","refresh_access_token"]
    # # # Client ID is the client ID of the OIDC provider
    # clientId: "iqgeo-oidc"
    # # Client Secret is the client secret of the OIDC provider
    # clientSecret:
    #   # Secret name is the name of the secret that contains the client secret
    #   secretName: "oidc-client-secret"
    #   # Secret key is the key in the secret that contains the client secret
    #   secretKey: "oidc-client-secret"
    # # Response types is the list of response types that the OIDC provider will accept
    # responseTypes: ["code"]
    # # Scopes is the list of scopes that the OIDC provider will accept
    # scopes: ["openid", "profile", "email"]


appservers:
  - name: default-appserver
    replicaCount: 1

  - name: project-endpoints
    path: /modules/custom


persistence:
  # For Minikube/local testing, you need to use the standard storage class.
  storageClass: "standard"


workers:
  - name: default-worker

  # Second worker - processes Commsof integration tasks
  - name: replication-worker
    taskQueues: ['platform_extracts']
    replicaCount: 1
    taskWorkers: 1
    taskTimeout: 18000
    resources:
      limits:
        cpu: 2
        memory: 6Gi
      requests:
        cpu: 1
        memory: 4Gi
    autoscaling:
      enabled: false
    livenessProbe:
      terminationGracePeriodSeconds: 600
